<html>

<head>
    <script>
        let socket = new WebSocket("ws://" + location.host + "/ws");

        socket.onmessage = receiveMessage;

        function receiveMessage(msg) {
            let outputBox = document.getElementById('receivedBox');
            var chatMessage = JSON.parse(msg.data);
            outputBox.innerText += chatMessage.message + '\n';
        }

        function sendMessage(msg) {
            socket.send(JSON.stringify({ message: msg }));
        }
    </script>
</head>

<body>
    <h1>Hello world!</h1>
    <p>
        This was served by the VSSSFSHSS HTTP server!
    </p>
    <label for="messageBox">Message</label>
    <textarea id="messageBox"></textarea>
    <button onclick="sendMessage(document.getElementById('messageBox').value)">Send</button>
    <div id="receivedBox"></div>
</body>

</html>